# B 树相关

> B 树也就是 B- 树，我们不读作 B 减树，而是读作 B 树，但要写作 B- 树。

参考：[https://my.oschina.net/u/4116286/blog/3107389](https://my.oschina.net/u/4116286/blog/3107389)

## B 树

B 树即 B- 树，是一种平衡多路查找树，多叉结构，深度小于二叉树。

- 每个节点最多有m-1个关键字（可以存有的键值对）
- 根节点最少可以只有1个关键字
- 非根节点至少有m/2个关键字
- 每个节点中的关键字都按照从小到大的顺序排列，每个关键字的左子树中的所有关键字都小于它，而右子树中的所有关键字都大于它
- 所有叶子节点都位于同一层，或者说根节点到每个叶子节点的长度都相同
- 每个节点都存有索引和数据，也就是对应的key和value
- 其查找操作类似于二叉搜素树，只不过 B- 树是多路查找
- 平衡二叉树中每个节点都只有一个数据域和两个指针，而 B- 树中的每个中间节点都有 k-1 个关键字和 k 个子树
- 所有插入的元素都在叶子结点上，即 B- 树中的所有叶子结点都在同一层
- 对于查找数据，遵循左小右大的规则。并和子树的关键字去比较，确定最终的范围
- B- 树通过分裂来调整树的结构以此来保证树的平衡
- 根节点的关键字数量范围：1 <= k <= m-1，非根节点的关键字数量范围：m/2 <= k <= m-1
- 常用于 HPFS 文件系统，HFS+ 文件系统，JFS 文件系统和数据库中引擎的实现


## B+ 树

B+ 树是 B 树的升级，为叶子结点增加了链表指针。

- 非叶子结点的子树指针与关键字个数相同；
- 非叶子结点的子树指针 p 指向关键字值属于 \[ki,ki+1) 的子树（B- 树是开区间）
- 为所有叶子结点增加一个链指针；
- 所有关键字都在叶子结点出现，并且满足左小右大

## B\* 树

B\* 树是在 B+ 树的基础上拓展的，为非叶子节点也增加了链表指针。



## 为什么用 B+ 树而不是 B- 树？

- B- 树查找不如 B+ 树稳定
- 实际场景中的 B+ 树要比 B- 树的 io 开销小的多
- B+ 树叶子结点上存在着链表结构，进行范围查询更加简单


## References

- [https://mbinary.xyz/b-tree.html](https://mbinary.xyz/b-tree.html)
- [https://juejin.im/entry/5b0cb64e518825157476b4a9](https://juejin.im/entry/5b0cb64e518825157476b4a9)
