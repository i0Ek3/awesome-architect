# 设计模式

> 设计模式的部分转载自 pezy 大神的博客，欢迎访问：[https://pushmind.org/2017/07/31/design-patterns-for-humans/](https://pushmind.org/2017/07/31/design-patterns-for-humans/)。

说起来 23 种设计模式, 很吓人的样子, 其实应该重点掌握的只有几个而已:

- 创建型模式中, 重点掌握三个工厂, 与单例
    - 简单工厂实际上算不上模式(书里都没单独列出), 关键就是工厂方法
    - 抽象工厂只不过是工厂的工厂而已
    - 那么工厂方法其实抽象的是new的过程, 那么关键就是 new 的两边都应该是抽象接口, 封装掉具体实现
    - 单例模式, 要先了解其弊端, 但那也是它最核心的特点: 全局性. 这玩意会在实际开发中大量使用, 但理想情况下应该是避免的
    - 剩下俩: 原型就是 copy, 生成器就是”拆迁构造器”

- 结构型模式中, 重点掌握桥接, 这个模式是重构神器. 如果领导说, 这个类太复杂了, 把它”抽一抽”, “单拎出来”. 那么十有八九是运用桥接模式. 结构型其实可以按以下基本特性分个类:  
    - 加一层: 适配器, 外观, 代理
    - 减肥: 桥接
    - 常见编程技巧: 组合(就是基于接口迭代), 享元(哈希表), 装饰(不断实例化修改父类成员)

- 行为型模式中, 重点掌握观察者和访问者. 行为型模式都有一个共同的特点, 就是非常讲究注入和回调这两个手段. 尤其以观察者与访问者, 用的登峰造极. 前者是所有消息系统的灵魂, 重点掌握消息列表, 与通知的时机. 后者是著名的IoC(控制反转)与DI(依赖注入)的灵魂. 这也是维护老系统必备的技巧. 它的重点是在不破坏已有接口的前提下, 如何增加新的特性. 剩下的模式我们也大致分个类:
    - 基本数据结构在面向对象的体现: 责任链(对象链表轮询), 命令(ACID), 迭代器(C++ 中的 iterator), 备忘录(缓存状态), 状态(状态机)
    - DI: 中介者(注入中介), 观察者(注入订阅者), 访问者(注入访问接口), 策略(注入算法对象)
    - 常见编程技巧: 模板方法(固定接口, 子类实现)

Tips: 不同大类的模式, 也许名字听着类似, 但实质却完全不同. 如中介者, 与适配器, 代理, 感觉就很类似. 但中介者是被注入后起到作用的, 后两者却是在结构上增加了一层.

划出的几个重点也是面试常常考察的: 工厂, 单例, 桥接, 观察者, 访问者. 其余要么过于简单, 没啥好考察的; 要么已经和语言特性密不可分, 问起来容易被绕过去. 但这五者, 却很具备考察性, 要是能数清楚, 设计模式就算掌握了.


## References

- [https://pushmind.org/2017/07/31/design-patterns-for-humans/](https://pushmind.org/2017/07/31/design-patterns-for-humans/)
- [https://github.com/i0Ek3/DesignPatterns](https://github.com/i0Ek3/DesignPatterns)


